-------------Syntax-------------
device function:
- disc:rotate @zone|empty|finished --> disc:zone zoneName
- disc:slot @zone|empty|finished >> slotId
- disc:set slotId := value|variableName
- scanner:scan >> nameOfReturnVariable
- crane:pickup @zone
- crane:drop @zone

transition
- -->

assign variable to device function 
- =: variable

retrieve variable 
- @variable

for
- for color in disc:slot

-------------Setup-------------
create crane named "crane"
with zone at 30 named "craneIn"
with zone at 60 named "craneOut"
with zone at 120 named "redBox"
with zone at 140 named "greenBox"
with zone at 160 named "blueBox"

create storage named "disc"
with capacity 8
with zone at slot 1 named "discIn"
with zone at slot 2 named "discOut"
with zone at slot 3-7 named "waiting"
with zone at slot 8 named "scanning"

create camera named "scanner"
with color red
with color blue
with color green
____________________________________

for disc:slot finished >> ref::
    disc:rotate @ref --> disc:zone craneOut
    crane:pickup @craneOut
    if @ref.color is red::
        crane:drop @redBox
    if @ref.color is green::
        crane:drop @greenBox
    if @ref.color is blue::
        crane:drop @blueBox
        
if disc:capacity > 0::
    crane:pickup @craneIn
    disc:rotate empty --> disc:zone discIn
    crane:drop @craneOut
    disc:rotate @discIn --> disc:zone scanning
    scanner:scan >> color
    disc:set @scanning := itemColor = color
    if @scanning.itemColor is red::
        disc:rotate @scanning --> disc:zone waiting
        disc:set @waiting := wait = 30
    if @scanning.itemColor is green::
        disc:rotate @scanning --> disc:zone waiting
        disc:set @waiting := wait = 20
    if @scanning.itemColor is blue::
        disc:rotate @scanning --> disc:zone waiting
        disc:set @waiting := wait = 20